{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/almog-l/Downloads/almog/moveo/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/almog-l/Downloads/almog/moveo/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/almog-l/Downloads/almog/moveo/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{React,useEffect,useState}from\"react\";import io from'socket.io-client';import{Link}from\"react-router-dom\";// import {withRouter} from 'react-router-dom'\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var socket=io.connect(\"http://localhost:3001\");var MentorPage=function MentorPage(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),messageRecivied=_useState2[0],setMessageRecivied=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),show=_useState4[0],setShow=_useState4[1];var id=\"\";useEffect(function(){socket.on(\"receive_code_changes\",function(data){setMessageRecivied(data.message);setShow(false);});},[socket]);window.onpopstate=function(){return setTimeout(fetchMentorConnected(),0);};var fetchMentorConnected=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,json,singleItem;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('/api/mentor');case 2:response=_context.sent;_context.next=5;return response.json();case 5:json=_context.sent;singleItem=json[0];if(response.ok){id=singleItem._id;updateMentorConnected();}case 8:case\"end\":return _context.stop();}},_callee);}));return function fetchMentorConnected(){return _ref.apply(this,arguments);};}();var updateMentorConnected=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var isConnected,item,response,json;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:isConnected=false;item={isConnected:isConnected};_context2.next=4;return fetch(\"api/mentor/\"+id,{method:\"PATCH\",body:JSON.stringify(item),headers:{'content-Type':'application/json'}});case 4:response=_context2.sent;_context2.next=7;return response.json();case 7:json=_context2.sent;if(response.ok){console.log(\"there is response\");}case 9:case\"end\":return _context2.stop();}},_callee2);}));return function updateMentorConnected(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{className:\"title\",children:\"Mentor page\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"codeBlock-details\",children:[/*#__PURE__*/_jsx(\"h4\",{children:props.title}),/*#__PURE__*/_jsxs(\"pre\",{children:[show?props.code:messageRecivied,\" \"]})]})]});};export default MentorPage;","map":{"version":3,"names":["React","useEffect","useState","io","Link","socket","connect","MentorPage","props","messageRecivied","setMessageRecivied","show","setShow","id","on","data","message","window","onpopstate","setTimeout","fetchMentorConnected","fetch","response","json","singleItem","ok","_id","updateMentorConnected","isConnected","item","method","body","JSON","stringify","headers","console","log","title","code"],"sources":["C:/Users/almog-l/Downloads/almog/moveo/frontend/src/pages/MentorPage.js"],"sourcesContent":["import { React, useEffect ,useState } from \"react\";\r\nimport io from 'socket.io-client'\r\nimport { Link } from \"react-router-dom\"\r\n\r\n\r\n// import {withRouter} from 'react-router-dom'\r\nconst socket = io.connect(\"http://localhost:3001\")\r\n\r\nconst MentorPage  = (props)=>{\r\n    const [messageRecivied, setMessageRecivied] = useState(\"\")\r\n    const [show,setShow] = useState(true)\r\n\r\n    let id = \"\"\r\n\r\n    useEffect(()=>{\r\n        socket.on(\"receive_code_changes\", (data)=>{\r\n           setMessageRecivied(data.message)\r\n           setShow(false) \r\n        })\r\n    }, [socket])\r\n\r\n    window.onpopstate = () => setTimeout(fetchMentorConnected(), 0);\r\n\r\n    const fetchMentorConnected = async ()  =>{\r\n        const response = await fetch('/api/mentor')\r\n        const json = await response.json()\r\n        const singleItem = json[0]\r\n        if(response.ok){\r\n            id = singleItem._id\r\n\r\n            updateMentorConnected()\r\n        }\r\n    }\r\n\r\n    const updateMentorConnected = async ()=>{\r\n        const isConnected = false\r\n        const item = {isConnected}\r\n        const response = await fetch(\"api/mentor/\" + id,{\r\n            method:\"PATCH\",\r\n            body:JSON.stringify(item),\r\n            headers:{\r\n                'content-Type':'application/json'\r\n            }\r\n        })\r\n        const json = await response.json()\r\n\r\n        if(response.ok){\r\n            console.log(\"there is response\")\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div><strong className=\"title\">Mentor page</strong>\r\n            <div className=\"codeBlock-details\">\r\n            <h4>{props.title}</h4>\r\n                <pre>{show ? props.code :messageRecivied} </pre>\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default MentorPage\r\n\r\n"],"mappings":"+ZAAA,OAASA,KAAK,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAOC,GAAE,KAAM,kBAAkB,CACjC,OAASC,IAAI,KAAQ,kBAAkB,CAGvC;AAAA,wFACA,GAAMC,OAAM,CAAGF,EAAE,CAACG,OAAO,CAAC,uBAAuB,CAAC,CAElD,GAAMC,WAAU,CAAI,QAAdA,WAAU,CAAKC,KAAK,CAAG,CACzB,cAA8CN,QAAQ,CAAC,EAAE,CAAC,wCAAnDO,eAAe,eAAEC,kBAAkB,eAC1C,eAAuBR,QAAQ,CAAC,IAAI,CAAC,yCAA9BS,IAAI,eAACC,OAAO,eAEnB,GAAIC,GAAE,CAAG,EAAE,CAEXZ,SAAS,CAAC,UAAI,CACVI,MAAM,CAACS,EAAE,CAAC,sBAAsB,CAAE,SAACC,IAAI,CAAG,CACvCL,kBAAkB,CAACK,IAAI,CAACC,OAAO,CAAC,CAChCJ,OAAO,CAAC,KAAK,CAAC,CACjB,CAAC,CAAC,CACN,CAAC,CAAE,CAACP,MAAM,CAAC,CAAC,CAEZY,MAAM,CAACC,UAAU,CAAG,iBAAMC,WAAU,CAACC,oBAAoB,EAAE,CAAE,CAAC,CAAC,GAE/D,GAAMA,qBAAoB,4FAAG,uLACFC,MAAK,CAAC,aAAa,CAAC,QAArCC,QAAQ,qCACKA,SAAQ,CAACC,IAAI,EAAE,QAA5BA,IAAI,eACJC,UAAU,CAAGD,IAAI,CAAC,CAAC,CAAC,CAC1B,GAAGD,QAAQ,CAACG,EAAE,CAAC,CACXZ,EAAE,CAAGW,UAAU,CAACE,GAAG,CAEnBC,qBAAqB,EAAE,CAC3B,CAAC,qDACJ,kBATKP,qBAAoB,0CASzB,CAED,GAAMO,sBAAqB,6FAAG,4KACpBC,WAAW,CAAG,KAAK,CACnBC,IAAI,CAAG,CAACD,WAAW,CAAXA,WAAW,CAAC,wBACHP,MAAK,CAAC,aAAa,CAAGR,EAAE,CAAC,CAC5CiB,MAAM,CAAC,OAAO,CACdC,IAAI,CAACC,IAAI,CAACC,SAAS,CAACJ,IAAI,CAAC,CACzBK,OAAO,CAAC,CACJ,cAAc,CAAC,kBACnB,CACJ,CAAC,CAAC,QANIZ,QAAQ,uCAOKA,SAAQ,CAACC,IAAI,EAAE,QAA5BA,IAAI,gBAEV,GAAGD,QAAQ,CAACG,EAAE,CAAC,CACXU,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC,CACpC,CAAC,uDACJ,kBAfKT,sBAAqB,2CAe1B,CAED,mBACI,oCAAK,eAAQ,SAAS,CAAC,OAAO,UAAC,aAAW,EAAS,cAC/C,aAAK,SAAS,CAAC,mBAAmB,wBAClC,oBAAKnB,KAAK,CAAC6B,KAAK,EAAM,cAClB,uBAAM1B,IAAI,CAAGH,KAAK,CAAC8B,IAAI,CAAE7B,eAAe,CAAC,GAAC,GAAM,GAC9C,GACJ,CAGd,CAAC,CAED,cAAeF,WAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}